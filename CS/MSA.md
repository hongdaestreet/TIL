# MSA

**MicroServices Architecture**

하나의 애플리케이션을 독립적인 여러 서비스로 분리하여 개발·배포하는 아키택쳐 스타일

각 Micro Service는 독립적으로 배포 가능함. 특정 도메인 기능을 단독으로 수행함 (ex. 결제, 회원관리, 상품관리, 회원관리 분리)

## 특징

1. 서비스 분리 : 기능별로 독립함
2. 독립 배포 : 개별 서비스 단위로 배포 및 확장
3. 분산 시스템 : 네트워크를 통한 서비스 간 통신 (REST API, gRPC)
4. 데이터 저장소 독립 : 각 서비스는 자신의 DB를 가짐 (DB 공유하지 않음)
5. DevOps 지향 : CI/CD, 컨테이너화, 자동 테스트에 적합함
6. 서비스마다 다른 언어·프레임워크 사용 가능함

## 작동 과정

1. 클라이언트 요청 : 클라이언트는 API Gateway를 통해 요청을 보냄
2. API Gateway : 클라이언트 요청을 각 MicroService로 라우팅하고 인증,로깅 등을 처리함
3. 서비스 간 통신 : 특정 기능이 여러 서비스에 걸쳐 있으면 내부적으로 REST/gRPC/메시지 큐* 등으로 통신함
4. 각 서비스에서 DB 접근 : 자신 DB에만 접근해서 트랜잭션 수행함
5. 결과 접근 : 응답은 API Gateway를 통해 다시 클라이언트로 반환됨

## 장점

1. 장애 격리 : 서비스 하나에 에러가 나도 전체 시스템에는 영향이 최소화됨
2. 확장성 : 서비스 단위로 독립적으로 확장할 수 있음
3. 배포 유연성 : 일부 서비스만 수정·배포 가능 → 빠르게 릴리즈할 수 있음
4. 기술적 다양성 : 서비스별로 다양하게 기술을 사용할 수 있음

## 단점

1. 운영 복잡성 : 모니터링, 로그 수집 등이 복잡해짐
2. 성능 : 다른 서버 간 통신을 할 때 API 호출을 해야 함 → Latency, 통신 비용 소모
3. 데이터 일관성 관리 어려움 : 서비스 간 연결을 하려면 트랜잭션 유지하기 어려움
4. 네트워크 비용 : 서비스 간 통신 → 지연 및 장애 가능성 
5. 테스트 어려움

## 언제 사용해야 할까?

- 대규모 트래픽/서비스 운영
- 서비스 별로 다른 확장 전략이 필요할 때
- 도메인 경계가 명확하게 정의됐을 때
- 빈번하게 배포를 해야 할 때 (ex. SaaS, 커머스,…)

---

**APPENDIX**

- * REST : HTTP 프로토콜 기반 요청/응답 형식
- * gRPC : Google에서 만든 통신 프로토콜
- * 메시지 큐 : 서비스 간 통신을 비동기적으로 처리할 수 있게 하는 시스템

| 구분 | REST | gRPC | 메시지 큐 |
| --- | --- | --- | --- |
| 통신 방식 | HTTP 요청/응답 | 함수 호출처럼 사용 | 메시지 보내고 대기 안 함 |
| 동기/비동기 | 동기 | 동기/비동기 모두 지원 | 비동기 |
| 포맷 | JSON | Protocol Buffers | 자유 형식 (JSON, Avro 등) |
| 속도 | 느림 | 빠름 | 매우 유연 |
| 사용 예시 | 대부분의 API | 내부 고성능 서비스 | 이벤트 기반 처리 |